# Kubernetes Cluster Role - Default Variables (CloudStack CKS)
---
# CloudStack API connection
kubernetes_cluster_api_url: ''
kubernetes_cluster_api_key: ''
kubernetes_cluster_api_secret: ''

# Admin credentials (used if API keys not provided)
kubernetes_cluster_admin_username: 'admin'
kubernetes_cluster_admin_password: ''

# Kubernetes clusters to create/manage
kubernetes_cluster_list: []
# Example:
#   - name: "k8s-prod"
#     description: "Production Kubernetes Cluster"
#     zone: "Zone1"                    # Zone name (will lookup ID)
#     kubernetes_version: "v1.33.1"    # Version name (will lookup ID)
#     service_offering: "CKS Instance" # Service offering name (will lookup ID)
#     network: ""                      # Network name (optional, auto-created if empty)
#     size: 2                          # Number of worker nodes
#     control_nodes: 1                 # Number of control plane nodes (HA: 3)
#     node_root_disk_size: 20          # Root disk size in GB
#     template: "CKS-Ubuntu-22.04"     # CKS template for control/worker nodes
#     enable_csi: true                 # Enable CSI driver (default: true)
#     enable_gpu: false                # Enable GPU passthrough (requires GPU service offering)
#     gpu_service_offering: ""         # GPU-enabled service offering (optional, uses service_offering if empty)
#     external_load_balancer: ""       # External LB IP for HA (optional)
#     docker_registry_username: ""     # Private registry username (optional)
#     docker_registry_password: ""     # Private registry password (optional)
#     docker_registry_url: ""          # Private registry URL (optional)

# Clusters to upgrade (set upgrade_to_version for each cluster)
kubernetes_cluster_upgrade_list: []
# Example:
#   - name: "k8s-prod"
#     upgrade_to_version: "v1.34.0"   # Target version to upgrade to

# CKS-ready template configuration (OPTIONAL)
# Leave name empty to use CKS default SystemVM template (recommended)
# Only set this if you have a custom CKS-ready template
kubernetes_cluster_cks_template:
  # name: ""  # Empty = skip custom template registration
  # Example for custom template:
  name: 'CKS-Ubuntu-22.04'
  display_text: 'CKS-ready Ubuntu 22.04 LTS template for Kubernetes'
  url: 'http://download.cloudstack.org/testing/custom_templates/ubuntu/22.04/cks-ubuntu-2204.qcow2.gz'
  format: 'QCOW2'
  hypervisor: 'KVM'
  os_type: 'Ubuntu 22.04 LTS'
  zone: ''
  is_public: true
  password_enabled: false
  sshkey_enabled: true

# Default cluster settings
kubernetes_cluster_defaults:
  size: 1
  control_nodes: 1
  node_root_disk_size: 10
  description: 'Kubernetes Cluster'
  template: '' # Empty = use CKS default SystemVM template (recommended)
  enable_csi: true # Enable CSI driver for persistent volumes

# Wait for cluster to be ready
kubernetes_cluster_wait_for_cluster: true
kubernetes_cluster_wait_timeout: 1800 # 30 minutes

# Upgrade settings
kubernetes_cluster_wait_for_upgrade: true
kubernetes_cluster_upgrade_timeout: 3600 # 60 minutes

# API timeout
kubernetes_cluster_api_timeout: 300
