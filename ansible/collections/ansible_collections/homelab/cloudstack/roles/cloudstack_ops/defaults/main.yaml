# CloudStack Ops Role - Default Variables
---
# CloudStack API connection
cloudstack_ops_api_url: ""
cloudstack_ops_api_key: ""
cloudstack_ops_api_secret: ""

# Use admin credentials if API keys not set
cloudstack_ops_admin_username: "admin"
cloudstack_ops_admin_password: ""

# Zone configuration
cloudstack_ops_zone:
  name: ""
  dns1: ""
  dns2: ""
  internal_dns1: ""
  internal_dns2: ""
  network_type: ""  # Basic or Advanced
  guest_cidr: ""  # Large CIDR for many tenant networks
  domain: ""  # Optional domain for the zone
  local_storage_enabled: true  # Enable to use local disk on hosts for primary storage
  security_groups_enabled: true  # Enable for flat network without VLAN isolation

# Physical network configuration (required for both Basic and Advanced zones)
# At minimum, you need Management traffic type configured
# For single NIC/untagged setup: all traffic types use the same bridge (cloudbr0)
cloudstack_ops_physical_networks:
  - name: "Physical Network 1"
    isolation_method: "VLAN"  # Required but unused with Security Groups
    vlan_range: ""  # Empty for untagged/flat network
    traffic_types:
      - type: "Management"
        label: "cloudbr0"
      - type: "Guest"
        label: "cloudbr0"  # Same bridge for single NIC
      - type: "Public"
        label: "cloudbr0"

# Pod configuration
cloudstack_ops_pods: []
# Example:
#   - name: "Pod1"
#     gateway: "10.30.30.1"
#     netmask: "255.255.255.0"
#     start_ip: "10.30.30.100"
#     end_ip: "10.30.30.150"

# Cluster configuration
cloudstack_ops_clusters:
  - name: "Cluster1"
    pod_name: "Pod1"
    hypervisor: "KVM"
    cluster_type: "CloudManaged"

# Public IP range (for Advanced zones)
cloudstack_ops_public_ip_ranges: []
# Example:
#   - gateway: "10.30.30.1"
#     netmask: "255.255.255.0"
#     start_ip: "10.30.30.200"
#     end_ip: "10.30.30.250"
#     vlan: ""  # Leave empty for untagged

# Guest network VLAN range (for Advanced zones with VLAN isolation)
cloudstack_ops_guest_vlan_range: ""

# Guest networks to create
cloudstack_ops_networks: []

# Primary storage
# Supports both cluster-scoped (NFS) and host-scoped (local) storage
cloudstack_ops_primary_storages: []
# Examples:
#   # NFS shared storage (cluster-scoped)
#   - name: "NFS-Primary"
#     cluster_name: "Cluster1"
#     url: "nfs://10.30.30.10/export/primary"
#     scope: "cluster"
#
#   # Local MergeFS storage on specific host (host-scoped)
#   # Uses the unified MergeFS mount point that combines multiple disks
#   - name: "Local-MergeFS-Host1"
#     cluster_name: "Cluster1"
#     host: "10.30.30.56"
#     url: "/mnt/cloudstack-storage"  # MergeFS unified mount point
#     scope: "host"
#
#   - name: "Local-MergeFS-Host2"
#     cluster_name: "Cluster1"
#     host: "10.30.30.57"
#     url: "/mnt/cloudstack-storage"
#     scope: "host"

# Secondary storage
cloudstack_ops_secondary_storages: []

# Hosts to add
# Example:
#   - hostname: "10.30.30.56"
#     cluster_name: "Cluster1"
#     host_tags: "kubernetes,gpu"  # Optional: comma-separated tags
cloudstack_ops_hosts: []

# GPU configuration
# CloudStack supports GPU passthrough (vGPU) for NVIDIA GPUs
# Set to empty dict {} to skip GPU configuration
cloudstack_ops_gpu_groups: []
# Example:
#   - host: "10.30.30.56"           # Host IP or name
#     gpu_type: "passthrough"       # "passthrough" or "vgpu"
#     gpu_group_name: "NVIDIA"      # GPU group name (e.g., NVIDIA, AMD)
#     vgpu_type: ""                 # vGPU type (only for vgpu, e.g., "GRID K1", "GRID K2")

# SSH key pair (optional)
# If onepassword_enabled=true, key is saved to 1Password
# Otherwise, key is saved locally to ~/.ssh/
cloudstack_ops_ssh_key_name: ""

# Enable zone after setup
cloudstack_ops_enable_zone: true

# Wait for async jobs timeout (seconds)
cloudstack_ops_async_timeout: 300

# Proxmox Orchestrator Extension
# CloudStack 4.19+ includes built-in Proxmox extension at /usr/share/cloudstack-management/extensions/Proxmox/
cloudstack_ops_proxmox_extension:
  enabled: false
  # Proxmox hosts to register
  hosts: []
  # Example:
  #   - name: "pve01"
  #     url: "https://10.0.0.5:8006"
  #     username: "root@pam"
  #     token_id: "cloudstack"
  #     token_secret: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  #     verify_ssl: false
  #     node: "pve01"  # Proxmox node name
  #   - name: "pve02"
  #     url: "https://10.0.0.6:8006"
  #     username: "root@pam"
  #     token_id: "cloudstack"
  #     token_secret: "yyyyyyyy-yyyy-yyyy-yyyy-yyyyyyyyyyyy"
